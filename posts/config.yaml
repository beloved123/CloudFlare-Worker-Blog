port: 7890
socks-port: 7891
allow-lan: true
mode: Rule
log-level: info
external-controller: :9090
ipv6: true

interface-name:

dns:
  enable: true
  ipv6: true
  listen: :53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
#    - '*.lan'
#    - localhost.ptlogin2.qq.com
  nameserver:
    - https://dns.alidns.com/dns-query
#    - https://doh.pub/dns-query
#    - https://ea-dns.rubyfish.cn/dns-query
#    - https://uw-dns.rubyfish.cn/dns-query
#    - https://doh.360.cn/dns-query
    - https://doh.dns.sb/dns-query
    - https://dns.cloudflare.com/dns-query
    - https://doh.opendns.com/dns-query
    - https://dns-unfiltered.adguard.com/dns-query
    - https://dns.nextdns.io/dnscrypt-proxy
    - https://dns10.quad9.net/dns-query
    - https://doh.crypto.sx/dns-query
    - https://dns.containerpi.com/dns-query
    - https://dns.pumplex.com/dns-query
    - https://doh.rixcloud.dev/dns-query
#    - tls://1dot1dot1dot1.cloudflare-dns.com:853
#    - tls://dns-unfiltered.adguard.com:853
#    - tls://dns.sb:853
#    - tls://dns.pub:853
#    - tls://dns.alidns.com:853
#    - tls://ea-dns.rubyfish.cn:853
#    - tls://uw-dns.rubyfish.cn:853
#    - tls://dot.360.cn:853
#    - tls://dns.google:853
  fallback:
    - https://dns.cloudflare.com/dns-query
    - https://dns-unfiltered.adguard.com/dns-query
#    - https://dns.alidns.com/dns-query
#    - https://dns.google.com/dns-query
#    - tls://dns.google:853
  fallback-filter:
    geoip: true
    ipcidr:
    - 240.0.0.0/4
  experimental:
    ignore-resolve-fail: true

proxies:
  - {name: NeteaseUnblock 1, type: ss, server: music.desperadoj.com, port: 30001, cipher: aes-128-gcm, password: desperadoj.com_free_proxy_emx2}
  - {name: NeteaseUnblock 2, type: ss, server: music.desperadoj.com, port: 30001, cipher: aes-128-gcm, password: desperadoj.com_free_proxy_emx2}
  - {name: NeteaseUnblock 3, server: fs2.ilogic.net.cn, port: 5200, type: http, tls: false, skip-cert-verify: false, udp: true}
  - {name: NeteaseUnblock 4, server: music.desperadoj.com, port: 30001, type: ss, cipher: aes-128-gcm, password: desperadoj.com_free_proxy_vrfn, udp: true}
  - {name: NeteaseUnblock 5, server: music.lolico.me, port: 39000, type: http, tls: false, skip-cert-verify: false, udp: true}
  - {name: HK-Myqnapcloud, server: gyddnas.myqnapcloud.cn, port: 12366, type: ss, cipher: aes-256-gcm, password: PSlwA9OIrG64}
  - {name: NeteaseUnblock-HK-PC, server: 99.83.196.141, port: 58080, type: ss, cipher: rc4-md5, password: ieG9l1nte5eo7IBZas84jLi, udp: true}
  - {name: NeteaseUnblock-HK-IOS, server: 99.83.196.141, port: 58081, type: ss, cipher: rc4-md5, password: ieG9l1nte5eo7IBZas84jLi, udp: true}
  - {name: NeteaseUnblock-JP-PC, server: netease-jp.wcc.best, port: 58080, type: ss, cipher: rc4-md5, password: ngIF8Qs52OSElP6x, udp: true}
  - {name: NeteaseUnblock-JP-IOS, server: netease-jp.wcc.best, port: 58081, type: ss, cipher: rc4-md5, password: ngIF8Qs52OSElP6x, udp: true}
  - {name: NeteaseUnblock-CN-HHHT-PC, server: netease-hhht.wcc.best, port: 58080, type: ss, cipher: rc4-md5, password: T5ckndbLSXHQ, udp: true}
  - {name: NeteaseUnblock-CN-HHHT-IOS, server: netease-hhht.wcc.best, port: 58081, type: ss, cipher: rc4-md5, password: T5ckndbLSXHQ, udp: true}
  - {name: Heroku-V2ray, server: v2ray.buildtest.site, port: 443, type: vmess, uuid: ad806487-2d26-4636-98b6-ab85cc8521f7, alterId: 64, cipher: auto, tls: true, network: ws, ws-path: /, ws-headers: {Host: v2ray.buildtest.site}}
  - {name: TW-01 D3/VR/IPLC, server: 14.17.97.145, port: 5010, type: vmess, uuid: 3bc521f7-439e-332c-acc4-594398dfa5a2, alterId: 2, cipher: auto, udp: true} 
  - {name: JP-01 D3/VR/IPLC, server: 14.17.97.145, port: 5008, type: vmess, uuid: 3bc521f7-439e-332c-acc4-594398dfa5a2, alterId: 2, cipher: auto, udp: true} 
  - {name: SG-01 D3/VR/IPLC, server: 14.17.97.145, port: 5006, type: vmess, uuid: 3bc521f7-439e-332c-acc4-594398dfa5a2, alterId: 2, cipher: auto, udp: true} 
  - {name: US-01 D3/VR/IPLC, server: 14.17.97.145, port: 5012, type: vmess, uuid: 3bc521f7-439e-332c-acc4-594398dfa5a2, alterId: 2, cipher: auto, udp: true} 
  - {name: HK-01 D3/VR/IPLC, server: 14.17.97.145, port: 5000, type: vmess, uuid: 3bc521f7-439e-332c-acc4-594398dfa5a2, alterId: 2, cipher: auto, udp: true} 
  - {name: HK-02 D3/VR/IPLC, server: 14.17.97.145, port: 5002, type: vmess, uuid: 3bc521f7-439e-332c-acc4-594398dfa5a2, alterId: 2, cipher: auto, udp: true} 
  - {name: HK-03 D3/VR/IPLC, server: 14.17.97.145, port: 5004, type: vmess, uuid: 3bc521f7-439e-332c-acc4-594398dfa5a2, alterId: 2, cipher: auto, udp: true} 
  - {name: HK-Microsoft, server: trojan.kdbaidu.com, port: 443, type: trojan, password: Trojan-MeMa=Uallen_Qbit-Trojan, sni: trojan.kdbaidu.com}
  - {name: JP-Tokyo 12, server: 45.87.213.3, port: 34651, type: ss, cipher: aes-256-gcm, password: fQrrhJUGWCGRfgvJgPDDX5sN}

#Dns污染回环本地
  - {name: REJECT DNS, server: 127.0.0.1, port: 53, type: http, cipher: aes-256-gcm, udp: true}
proxy-groups:
  - name: Proxies
    type: select
    proxies:
      - PingTest
      - DirectConnect
      - HK-Myqnapcloud
      - Heroku-V2ray
      - TW-01 D3/VR/IPLC
      - JP-01 D3/VR/IPLC
      - SG-01 D3/VR/IPLC
      - US-01 D3/VR/IPLC
      - HK-01 D3/VR/IPLC
      - HK-02 D3/VR/IPLC
      - HK-03 D3/VR/IPLC
      - HK-Microsoft
      - JP-Tokyo 12
  - name: PingTest
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    proxies:
      - HK-Myqnapcloud
      - Heroku-V2ray
      - TW-01 D3/VR/IPLC
      - JP-01 D3/VR/IPLC
      - SG-01 D3/VR/IPLC
      - US-01 D3/VR/IPLC
      - HK-01 D3/VR/IPLC
      - HK-02 D3/VR/IPLC
      - HK-03 D3/VR/IPLC
      - HK-Microsoft
      - JP-Tokyo 12

  - name: Netease
    type: select
    proxies:
      - DirectConnect
      - NeteaseUnblock 1
      - NeteaseUnblock 2
      - NeteaseUnblock 3
      - NeteaseUnblock 4
      - NeteaseUnblock 5
      - NeteaseUnblock-HK-PC
      - NeteaseUnblock-HK-IOS
      - NeteaseUnblock-JP-PC
      - NeteaseUnblock-JP-IOS
      - NeteaseUnblock-CN-HHHT-PC
      - NeteaseUnblock-CN-HHHT-IOS

  - name: DnsBlock
    type: select
    proxies:
      - REJECT DNS

  - name: DirectConnect
    type: select
    proxies:
      - DIRECT
      - HK-Myqnapcloud
      - Heroku-V2ray
      - TW-01 D3/VR/IPLC
      - JP-01 D3/VR/IPLC
      - SG-01 D3/VR/IPLC
      - US-01 D3/VR/IPLC
      - HK-01 D3/VR/IPLC
      - HK-02 D3/VR/IPLC
      - HK-03 D3/VR/IPLC
      - HK-Microsoft
      - JP-Tokyo 12

  - name: Final
    type: select
    proxies:
      - Proxies
      - DirectConnect
      - HK-Myqnapcloud
      - Heroku-V2ray
      - TW-01 D3/VR/IPLC
      - JP-01 D3/VR/IPLC
      - SG-01 D3/VR/IPLC
      - US-01 D3/VR/IPLC
      - HK-01 D3/VR/IPLC
      - HK-02 D3/VR/IPLC
      - HK-03 D3/VR/IPLC
      - HK-Microsoft
      - JP-Tokyo 12
rules:
#Google
 - DOMAIN,mtalk.google.com,DirectConnect
 - DOMAIN,alt1-mtalk.google.com,DirectConnect
 - DOMAIN,alt2-mtalk.google.com,DirectConnect
 - DOMAIN,alt3-mtalk.google.com,DirectConnect
 - DOMAIN,alt4-mtalk.google.com,DirectConnect
 - DOMAIN,alt5-mtalk.google.com,DirectConnect
 - DOMAIN,alt6-mtalk.google.com,DirectConnect
 - DOMAIN,alt7-mtalk.google.com,DirectConnect
 - DOMAIN,alt8-mtalk.google.com,DirectConnect
 - DOMAIN,alt9-mtalk.google.com,DirectConnect
#Dns over https
 - DOMAIN,dns.cloudflare.com,DirectConnect
 - DOMAIN,doh.opendns.com,DirectConnect
 - DOMAIN,dns-unfiltered.adguard.com,DirectConnect
 - DOMAIN,ddns.nextdns.io,DirectConnect
 - DOMAIN,dns10.quad9.net,DirectConnect
 - DOMAIN,doh.crypto.sx,DirectConnect
 - DOMAIN,dns.containerpi.com,DirectConnect
 - DOMAIN,dns.alidns.com,DirectConnect
 - DOMAIN,doh.pub,DirectConnect
 - DOMAIN,doh.dns.sb,DirectConnect
 - DOMAIN,dns.sb,DirectConnect
 - DOMAIN,ea-dns.rubyfish.cn,DirectConnect
 - DOMAIN,uw-dns.rubyfish.cn,DirectConnect
 - DOMAIN,doh.360.cn,DirectConnect
 - DOMAIN,dns.google,DirectConnect
 - DOMAIN,dns.pumplex.com,DirectConnect
 - DOMAIN,doh.rixcloud.dev,DirectConnect

 
#Github
 - DOMAIN-KEYWORD,github,Proxies
 - DOMAIN-SUFFIX,github.com,Proxies
 - DOMAIN-SUFFIX,github.io,Proxies
 - DOMAIN-SUFFIX,githubapp.com,Proxies
 - DOMAIN-SUFFIX,githubassets.com,Proxies
 - DOMAIN-SUFFIX,githubusercontent.com,Proxies
 - DOMAIN-SUFFIX,home-intl.console.aliyun.com,Proxies
 - DOMAIN,ip.skk.moe,Proxies
 - DOMAIN,ip.sb,Proxies
 - DOMAIN-SUFFIX,googleapis.cn,Proxies

#Netease Music
 - DOMAIN-SUFFIX,163yun.com,Netease
 - DOMAIN-SUFFIX,music.163.com,Netease
 - DOMAIN-SUFFIX,music.126.net,Netease
 - DOMAIN-SUFFIX,api.iplay.163.com,Netease
 - DOMAIN-SUFFIX,apm.music.163.com,Netease
 - DOMAIN-SUFFIX,apm3.music.163.com,Netease
 - DOMAIN-SUFFIX,interface.music.163.com,Netease
 - DOMAIN-SUFFIX,interface3.music.163.com,Netease
 - DOMAIN-SUFFIX,mam.netease.com,Netease
 - DOMAIN-SUFFIX,hz.netease.com,Netease
 - IP-CIDR,39.105.63.80/32,Netease
 - IP-CIDR,45.254.48.1/32,Netease
 - IP-CIDR,47.100.127.239/32,Netease
 - IP-CIDR,59.111.21.14/31,Netease
 - IP-CIDR,59.111.179.214/32,Netease
 - IP-CIDR,59.111.181.38/32,Netease
 - IP-CIDR,59.111.181.60/32,Netease
 - IP-CIDR,59.111.160.195/32,Netease
 - IP-CIDR,59.111.160.197/32,Netease
 - IP-CIDR,59.111.181.35/32,Netease
 - IP-CIDR,59.111.238.29/32,Netease
 - IP-CIDR,101.71.154.241/32,Netease
 - IP-CIDR,103.126.92.132/32,Netease
 - IP-CIDR,103.126.92.133/32,Netease
 - IP-CIDR,112.13.119.17/32,Netease
 - IP-CIDR,112.13.122.1/32,Netease
 - IP-CIDR,115.236.118.33/32,Netease
 - IP-CIDR,115.236.121.1/32,Netease
 - IP-CIDR,118.24.63.156/32,Netease
 - IP-CIDR,193.112.159.225/32,Netease
 - IP-CIDR,223.252.199.66/32,Netease
 - IP-CIDR,223.252.199.67/32,Netease

#Dns Pollution
 - SRC-PORT,0,DnsBlock
 - DST-PORT,0,DnsBlock
 - SRC-PORT,2,DnsBlock
 - DST-PORT,2,DnsBlock
 - SRC-PORT,53,DnsBlock
 - DST-PORT,53,DnsBlock
 - SRC-PORT,953,DnsBlock
 - DST-PORT,953,DnsBlock
 - SRC-PORT,5353,DnsBlock
 - DST-PORT,5353,DnsBlock
 - SRC-PORT,5355,DnsBlock
 - DST-PORT,5355,DnsBlock
 - SRC-PORT,1900,DnsBlock
 - DST-PORT,1900,DnsBlock
 - SRC-PORT,52219,DnsBlock
 - DST-PORT,52219,DnsBlock
 - IP-CIDR,224.0.0.251/32,DnsBlock
 - IP-CIDR,224.0.0.252/32,DnsBlock
 - IP-CIDR,239.255.255.250/32,DnsBlock
 - IP-CIDR,10.0.0.255/32,DnsBlock
 - IP-CIDR,192.168.0.1/16,DnsBlock
 - SRC-IP-CIDR,224.0.0.251/32,DnsBlock
 - SRC-IP-CIDR,224.0.0.252/32,DnsBlock
 - SRC-IP-CIDR,239.255.255.250/32,DnsBlock
 - SRC-IP-CIDR,10.0.0.255/32,DnsBlock
 - SRC-IP-CIDR,192.168.0.1/16,DnsBlock
 

 - GEOIP,CN,DirectConnect
 - MATCH,Proxies
